language: python
python:
- '3.6'
- '3.7'
- '3.8'
install:
- pip install -r requirements.txt
- pip install -e .[dev]
script:
- make clean
- make lint
- make typing
- mkdir public
- pytest -v --durations=10 --cov-report=xml --cov=xyzspaces tests
- make draft_changelog
deploy:
  provider: pypi
  username: __token__
  password:
    secure: lvbQz0W/t/9Zj981T7z+FbF3QAykIOvt/vK/ZJPkNzUQtuDcmKY2vRHqtFXDrFGg8pCVrCTaM83NInM0euaOv/rq7gyo1dDBi564aLRAWtTa0tXiKGp+OmaI+UQ6x+KYaNqpfppdXN86zl+aC9mxcKf1am8aeMvlFcqL3N9sXaQSpZhxShpwW1pjxOVf00zOM2nlKittAhEpqRUToyoO4dIjMILbIU+QUb+cMtrpBE4+c7807rHV3o0Ze1zi2wM9dKK44xmTxBkf2ff/qorhoEeHIr+6WAGCC5eCs5HdQmDhafNRgtSnqF2iJ/aqDsv2WEFjVS5nEZePYdAj66COj9bdd6CtkFjOw8sxHyATdVK7WPxXO9SVw4W8a04roCGq9hF4aY/7ztBoatzSfo7cwn86ry6xq5pEXnzUtbFmbOQveFJj2T16hZUigtRLh2d2wT5TOOOawQ4IPEXqhxwR2OXvaLTYXMINsioLJ+Jg2GEW2wMPmOYuu63sMkUBSBxb+RYqZLmpo1kYq3STnucv1u/LGpuWQMw9Ys8Bb+BTEumDYoP3uSHJcSeWgrgwDsS1V/6yYx0L8wXY2pQFrT8GPnH5sEaFG0UfM48Z0Kp7+Lf+527ONMrGfTThpR25l8PMw297H4B9fXmd/vjm35T7s/pipxM9Fxn95phwpp+gRxI=
  on:
    tags: true
    branch: master
    python: 3.7
    condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+
env:
  global:
  - secure: K8I9mDTKeXHLgG/gdwamQ3D1S2I8aQjZfqlRJBwmk3nPhJMfSjgPAMJRp3GmWxxElg/3iF8LoDTrXXw3/l4zd7o6SAZG0fTN2J/9zAa6afi10H43GPiiESiNNfbYFTOk4S2C6+9HsjyjgrYxaMTMvs5euLfBM9Q0uMkgLUCMxbIxQ8yGxgCQHA7zogDkvybxiXw5Yxny8gl8L3hqmixKDZwRwbPgtsEL/Zf4nqQT6D3HRt1v2gdScg/1csLk/CVZ54cess2nspbfuyNW+3+q6twHkzO3XAGOg5gqkBTiXE4n7eIrQUOyTpesT4bw1ku8btAUcb85JcSe/xKCeUI81XaQtULCXr8xo2nefRHxWGYEXZ30vHotJpnTk7CdJPXF7q/gCf+NqaMDy+bCKu9dgqFqRXkBg8mUaSblrk99d4Ec9NdUoJoonXnWEAS3KC/Ijm8XA7/v1+xUVxedCD4v9K0bLS5oqHiRfkn7T7mRl5HuErL12EJCeKD5HT3OyPvu8L7yST7Jaik7Ieznyk1uJCg3UGjAdjbHNneoBmGlavKUEL0OuDyeAJKOZVWy7IXmv9bBKgNoCIM3G+FIYJIJQfPFf52yP2s+/E+8HKyjk6H6M3ntOCsuohUZ1cqtpK5zVkZp7PjMGoN+ZxUycokxHi1Qrm4Me/l+b/JZYRpqAY0=
  - secure: O9IrTIEi/EIBl8bm+YGPxpPoee1YmUZBuod3cEjMSpW7tQdJrr03fNF/niRXV9XV885g2fqRfxCPrBPgpz3C1hdiI0bblPlVM1/DFsr9fhFjnm2of41Q/x18tJBPMr06Ch/WDV6FICtG0aH58RAxMsbCR/voVi2YEtbdlJlgyoFDVUV+nTW/XKl0BvK1M0fWQY87Y0rIgxsdMDpiznumbpKlgX+Ym2e5u+Gr/wmI+Uv7MWFAbEX9ui9z6eGbrtIpq7P2a0ja+zolExI6Bw1p9F+bu7DXeuru1zQdmVZOFOXBGE6QuvBlQ9aRmyQCXyCTqih47a6XNb6ta3E5wddq9ADrrU343ZJWzKzqV5Hn06lpKrxJnUNDFD1XVrGuOj7IkPXsRiQs5TIUfW/dAvPbYXuhrvQDrhgyDmGmqgMTjXOPVX1NSwpdiY2Q9MCym44ZSfhNT+vs33dgvfHkbweCgDT1QdYhC4EiQ4PEqFvLBa0SjG5AvMTYRFnfv9vU/RutHRXo08UZ/TJ20IhHfaMyqu/pDbg/d6ov6EwMXykusiM5XyKhCVGnsttWIy+xuFWW4stWgJVFTNbyntK5BeF0h9Psn3a8gfqIs4/tTIxwsuKyFd+CzMegAGI0QF6LCl/PJQiVXpmrZknIJL70AF2zImFCLnkofHPJau+XfAAMz/8=
  - secure: EXC8q1JbylYU/64TBH3vjMQWCC+wtG3w5opK8cyy6C8peJbAb2fX+jFxHu6ZSH3saxJF6GPb4+QoEPnNIV1r+JH4mnWj7Cmp9QLRFYbfD9Mc/E4rDXsP//d8M14NfDNpuO7XipGpsLqg77GUGRBiHMSGZKUzvaPRtThlS8vq8JSdn5urxo0qnTDu33GXLoSdnsU9GE2W5Gxl9dl6pqmG2ae4zssQqN7nVTP9fXDjohJNpFK7mNtfT02sqpuUTfkuxue4+KEbnm8lwp0xVK63UV/7zA+8Wk5wDY0Jfdbg8S6JorZGKjsMKz7shs5QwViI10kCihnfwh8fCZMwwUdIKwuRMrMTMEb2HWVm0W5Hhies+7khDO0MXvKJ7dSIWssA6/f6Fr46054OCnbW5laJVBkzt8CAnOBXvauQu7DzqNjNAA7fyvBBpWHhvlOL0WWyV+wmzwDcGoCfL6+fCVIDzMMpUwu7RS21bROLdak+/3RpnLKDNf6im9IZ72S0L2ya2ojtZwjENbtWMLh2eIW78MaLjl8BvKHKC5Yi8RL/WsHVXRkrvrCIoCTKLXLa4NOfS9p2sgy8jyUOQG5BHMNjfaBa8Ol4FHfatjFzwvfU+LwOliu/0Gcj4Lp37xUlRjp+asNYHoWX1tXXgM3CatS1yiMIDB4zYmdFD3bTBlu37n8=
after_success:
  - codecov