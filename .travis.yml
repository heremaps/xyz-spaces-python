dist: focal
language: python
python:
- '3.6'
- '3.7'
- '3.8'
install:
- pip install -r requirements.txt
- pip install -e .[dev]
script:
- make clean
- make lint
- make typing
- mkdir public
- pytest -v --durations=10 --cov-report=xml --cov=xyzspaces tests
- make draft_changelog
- sh scripts/build_docs.sh
deploy:
  provider: pypi
  username: __token__
  password:
    secure: lvbQz0W/t/9Zj981T7z+FbF3QAykIOvt/vK/ZJPkNzUQtuDcmKY2vRHqtFXDrFGg8pCVrCTaM83NInM0euaOv/rq7gyo1dDBi564aLRAWtTa0tXiKGp+OmaI+UQ6x+KYaNqpfppdXN86zl+aC9mxcKf1am8aeMvlFcqL3N9sXaQSpZhxShpwW1pjxOVf00zOM2nlKittAhEpqRUToyoO4dIjMILbIU+QUb+cMtrpBE4+c7807rHV3o0Ze1zi2wM9dKK44xmTxBkf2ff/qorhoEeHIr+6WAGCC5eCs5HdQmDhafNRgtSnqF2iJ/aqDsv2WEFjVS5nEZePYdAj66COj9bdd6CtkFjOw8sxHyATdVK7WPxXO9SVw4W8a04roCGq9hF4aY/7ztBoatzSfo7cwn86ry6xq5pEXnzUtbFmbOQveFJj2T16hZUigtRLh2d2wT5TOOOawQ4IPEXqhxwR2OXvaLTYXMINsioLJ+Jg2GEW2wMPmOYuu63sMkUBSBxb+RYqZLmpo1kYq3STnucv1u/LGpuWQMw9Ys8Bb+BTEumDYoP3uSHJcSeWgrgwDsS1V/6yYx0L8wXY2pQFrT8GPnH5sEaFG0UfM48Z0Kp7+Lf+527ONMrGfTThpR25l8PMw297H4B9fXmd/vjm35T7s/pipxM9Fxn95phwpp+gRxI=
  on:
    tags: true
    branch: master
    python: 3.7
    condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+
env:
  global:
    - secure: Nhzk2D/HUkHO+6pY8IOJYWZoihFKu/Ee0+L+KQKBde9yYKnSsTLQyfhpHQscMP+dQkSJh/rrNJrYCCl4pNNP3BAPEInatX/hsLqTl8MkhNKAfX98oNGUmCdodcKzuTIsJ42W0FJmPdBTPhB86IDo51TTHo3bGdVioA3WB717R+HnOc/5WsYI1tDWKJIiImRHXGaIqN23cdHiQVnduN01c7JOaSV2hrbKs+7DMWHA0HEStefgUvzTEzWSYtbo/LHSzwRl3vQnex/AllLZzZNs7VavkCABMdV1mXjJCplQUP/cYjdjGlhgVOYPnDLhZkeI6YuHodZtNcBPYmpSyjJ1g9/G/vR2ZxePghtzp6AEps/ODGDDcQdsWN8BLxpbol+IFMLchONAjO1txe8aezHCxml4lxVhef9q6peyYgkHpljju7HmdPZ92iE3rHpJaDp/EgQNJfexgm4oDhRyziEE3hP+GwAGVeMYfXwLIMLK5pdNlARB2CNgnjjgoQOghDqV15kHs6zijLJRre3Xt22XrSF1fCnu+kENsQ5gox7Sv99sOBwuvccBdHu5O+MgnJKTepEgrvDDNa3lN1MiZudcE7cxzzVjmk5kO34wyzqZ0OJUTVPt3CAEGzTBi7jqLIHdj/O/cwdZT5YnuvqGxJL/20O4Xpf18C/wZcyn4VkfUxo=
    - secure: NzPLvDnCSKZRDskTfbOucNf2xbyoFrm6OLavXwCWuD9RZPAzBdaPBFM/R2ufVukO8ahzenBhXe+4f2ZuwkeM5JMrPrVYB5hUQY0Vj/gjOKVdRQArW9Zo1/hpMEsYS8HFCiez2BxDPJIqEpGSjP14niN4O5ask20NUGiH0zno2NofFYifeyrWnNR17oxA7ZBLGNStG1pas+xMvEqbUdPuEOQEB9Z7KjUGLVWEp9kA1O3/CrjN9UPoGXyuZ04nqTbLU4irBS6AtuRF6adcu4wlbAvMTDN3Ou6/q+OE7OTe2xvIql3B3hv/iAMCRstIN9Ldj7TISPj/lg09APBN23CWWltDZVwBceQeQq3yuWAJzXxgebqQAvAm+oNdJU6Jpz2pG5xJOKJzqzFB5Fc397EEKfe0Ap5XLw78usYLPDJrnN2P+qp8LHHKSjBnSn1Y2wnlAHUzx6HaP5BhcxaJgNOYTdeIIpUTLNNErDBPjGI34OZUzRxtoeXwD+FJShV9xq8xmNjZZJVGRrgXKZEnOyTOf5Wsl6eRLTfjKbEiUKG4khsVDMR+BjApTKspDZPmEEQw6G/jboUUvoFAiO7scp7LeXuVgrZ0INJ796il0zE9u7wnWtt3CumdY2z2/b2WdN5FHLLandOVamy6exnrTsI9ZrU/LvLlwg5CMcjztToPFlA=
    - secure: joW0YOgf4Zx65dqd/HZt23GrAWQPZ8kow1IgqJv4GCijUbhlpE7bNYX1wblGilLUNhYInKjbZcIF71+Hj4dFP5tkucC9LVi4PBtkKTG1DbM+E3W9Uqs90JxlXQGUpgWCiZtpLuIzM4KATCvJv6ohtZgDVQIuhGRy5kEj4ZT70D5j7my67CwhlhF94Qta7LwyeMX/evMpvpX3VVWLR6eXKbcrg6D2yUYe9K8rMlq4ZKZEw0fe+K+hhlbhGCGKa2fz9q9mh+zFuFBWZD1bm0eR2kdDL9R5mGkN+aIN1e73HCqrXPYXExmEy5mCjHo5fk7jz6lFdqRlHc27jWcTp/BRbCo+BpGZQc5tX6+nGFQ+LzlCM2Gi8FlBaJaaBDPkw5ZkBzjAUAuD1QvwRcuO86rhbGo413Xkx2JaVTtKd5J1fDELEswwlJvD3fdfjCslsoXQ0MY7LOrqyQah1wFoBPhD9S2z7og/AurNZzGc6smF/C7Lyy+Iic9XTz7bP4VP7qKNF6yInwwcEpMo0gxTRGAwm8LePTyIiqeACItPBfGHl5NFWavAIk4KEGdSQicBDw0SgcY9hxtEx2T0DQTG+v+dCEjhZPCeSUWQ+vpuNEZcUu8aiuaZ1be2yCoKq6MEPOXy8Fcd8V8+/Gj7wOqrphD81VRqeBNsiopzjDXvobHyE+0=
after_success:
  - codecov